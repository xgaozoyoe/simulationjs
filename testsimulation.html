<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<script src="http://cdn.static.runoob.com/libs/angular.js/1.4.6/angular.min.js"></script>
</head>
	
<script>
var direction = function(agent){
	return agent.speed *(Math.floor(3*Math.random())-1);
}
var gen_agents = function () {
	var agents = [];
	var i = 0;
	for (i = 0; i<70; i++) {
		agents[i] = {
			"pos_x": Math.floor(50 * Math.random()) * 10 + 30,
			"pos_y": Math.floor(50 * Math.random()) * 10 + 30,
			"speed": Math.floor(10 * Math.random()) + 1
		}
	}
	return agents;
}
var app = angular.module('myApp', []);
var agents = gen_agents();
var step = function() {
	for(var i=0; i<70; i++) {
		agents[i].pos_x = agents[i].pos_x + direction(agents[i]);
		agents[i].pos_y = agents[i].pos_y + direction(agents[i]);
	}
}
var clear;
app.controller('ctrl', function($scope,$interval) {
    $scope.agents = agents;
	$scope.focus = agents[0];
	$scope.focus_agent = function(f){
		$scope.focus = f;
	}
	$scope.start = function(){
		clear = $interval (step,100);
	}
	$scope.end = function(){
		$interval.cancel(clear);
	}
});
	
</script>
<body>

<div ng-app="myApp" ng-controller="ctrl">
	<div style="float:right">
  		<p>{{focus.pos_x}}</p>
  		<p>{{focus.pos_y}}</p>
	</div>
  	<button ng-click="start()">play</button>
	<button ng-click="end()">end</button>
  	<div ng-repeat="agent in agents"
	   ng-click="focus_agent(agent)"
	   style="position:fixed;
			  top:{{agent.pos_x}}px;
			  left:{{agent.pos_y}}px;
			  display:blocked;
			  width:10px;
			  height:10px;border:1px dotted black">
	</div>
</div>
</body>
</html>